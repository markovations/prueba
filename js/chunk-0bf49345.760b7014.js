(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf49345"],{"196f":function(s,e,a){},"27b2":function(s,e,a){},7101:function(s,e,a){"use strict";a.r(e);var r=function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",[a("div",{staticClass:"login-asistencia"},[a("div",{staticClass:"contenedor-login"},[a("div",{staticClass:"box100"},[a("form",{staticClass:"formulario validate-form",staticStyle:{width:"500px","margin-left":"auto"},attrs:{"data-vv-scope":"login"},on:{submit:function(e){e.preventDefault(),s.validateBeforeSubmit("login")}}},[s._m(0),0!=s.cantEmpresas&&s.showEmpresas?a("div",{staticClass:"form-group"},[s._m(1),a("multiselect",{attrs:{options:s.OptionsEmpresas,searchable:!0,"show-labels":!0,label:"name","select-label":s.$t("multiselect.SELECTLABEL"),"deselect-label":s.$t("multiselect.DESELECTLABEL"),"selected-label":s.$t("multiselect.SELECTEDLABEL"),placeholder:s.$t("multiselect.PICKVALUE")},model:{value:s.empresa,callback:function(e){s.empresa=e},expression:"empresa"}},[a("template",{slot:"noOptions"},[s._v(s._s(s.$t("multiselect.LISTEMPTY")))]),a("template",{slot:"noResult"},[s._v(s._s(s.$t("multiselect.NORESULT")))])],2)],1):s._e(),a("span",{staticClass:"label-input100"},[a("i",{staticClass:"far fa-user"}),s._v("\n            "+s._s(s.$t("autenticacion.USUARIO"))+"\n          ")]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group with-focus"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.User,expression:"User"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":s.errors.has("login.user")},attrs:{type:"text",name:"user"},domProps:{value:s.User},on:{keyup:function(e){s.onKeyUp()},input:function(e){e.target.composing||(s.User=e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:s.errors.has("login.user"),expression:"errors.has('login.user')"}],staticClass:"invalid-feedback"},[s._v(s._s(s.errors.first("login.user")))])])]),a("span",{staticClass:"label-input100"},[a("i",{staticClass:"fas fa-lock"}),s._v("\n            "+s._s(s.$t("autenticacion.PASSWORD"))+"\n          ")]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group with-focus"},["checkbox"===s.passwordType?a("input",{directives:[{name:"model",rawName:"v-model",value:s.Password,expression:"Password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":s.errors.has("login.password")},attrs:{name:"password",type:"checkbox"},domProps:{checked:Array.isArray(s.Password)?s._i(s.Password,null)>-1:s.Password},on:{change:function(e){var a=s.Password,r=e.target,t=!!r.checked;if(Array.isArray(a)){var o=null,i=s._i(a,o);r.checked?i<0&&(s.Password=a.concat([o])):i>-1&&(s.Password=a.slice(0,i).concat(a.slice(i+1)))}else s.Password=t}}}):"radio"===s.passwordType?a("input",{directives:[{name:"model",rawName:"v-model",value:s.Password,expression:"Password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":s.errors.has("login.password")},attrs:{name:"password",type:"radio"},domProps:{checked:s._q(s.Password,null)},on:{change:function(e){s.Password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:s.Password,expression:"Password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":s.errors.has("login.password")},attrs:{name:"password",type:s.passwordType},domProps:{value:s.Password},on:{input:function(e){e.target.composing||(s.Password=e.target.value)}}}),a("div",{staticClass:"input-group-append",on:{click:s.showPwd}},[a("span",{staticClass:"input-group-text text-muted bg-transparent"},[a("em",{class:"password"===s.passwordType?"fas fa-eye-slash":"fas fa-eye"})])]),a("span",{directives:[{name:"show",rawName:"v-show",value:s.errors.has("login.password"),expression:"errors.has('login.password')"}],staticClass:"invalid-feedback"},[s._v(s._s(s.errors.first("login.password")))])])]),a("div",{staticClass:"flex-sb-m w-full p-t-3 p-b-32"},[a("div",{staticClass:"contact100-form-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.recordarme,expression:"recordarme"}],staticClass:"input-checkbox100",attrs:{id:"ckb1",type:"checkbox",name:"recordarme"},domProps:{checked:Array.isArray(s.recordarme)?s._i(s.recordarme,null)>-1:s.recordarme},on:{change:function(e){var a=s.recordarme,r=e.target,t=!!r.checked;if(Array.isArray(a)){var o=null,i=s._i(a,o);r.checked?i<0&&(s.recordarme=a.concat([o])):i>-1&&(s.recordarme=a.slice(0,i).concat(a.slice(i+1)))}else s.recordarme=t}}}),a("label",{staticClass:"label-checkbox100",attrs:{for:"ckb1"}},[s._v(s._s(s.$t("autenticacion.RECORDARME")))])])]),a("div",{staticClass:"container-login100-form-btn"},[a("button",{staticClass:"login100-form-btn"},[s._v(s._s(s.$t("autenticacion.INGRESAR")))])]),a("div",{staticClass:"forgetpass"},[a("router-link",{staticClass:"txt1",attrs:{to:"/recuperar",tag:"a"}},[s._v("¿Olvidaste tu contraseña?")])],1)]),a("div",{staticClass:"banner",staticStyle:{"background-image":"url('img/img-banner.png')"}})])])])])},t=[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("span",{staticClass:"tituloformulario p-b-43"},[a("img",{attrs:{src:"img/logo-markovations.png",width:"300px"}})])},function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("span",{staticClass:"label-input100"},[a("i",{staticClass:"far fa-building"}),s._v(" Empresa\n            ")])}],o=(a("097d"),a("2b0e")),i=a("7bb1"),n=a("bc3a"),l=a.n(n),c=a("3d20"),u=a.n(c),d=a("a65d"),m=a.n(d),p=a("8e5f"),v=a.n(p);o["default"].use(m.a),o["default"].use(i["a"],{fieldsBagName:"formFields"});var h={components:{Multiselect:v.a},data:function(){return{login:{user:"",password:"",rememberme:!1},passwordType:"password",empresa:this.getEmpresa(),recordarme:this.$store.state.session.usuario.recordarme,User:this.getUser(),Password:this.getPassword(),showEmpresas:this.getshowEmpresas()}},computed:{OptionsEmpresas:function(){return this.$store.state.session.empresas},cantEmpresas:function(){return this.$store.state.session.empresas.length}},mounted:function(){this.$store.dispatch("session/GET_EMPRESAS")},methods:{onKeyUp:function(){"admin"==this.User?(this.showEmpresas=!1,this.empresa={value:1,name:""}):this.showEmpresas=!0},getUser:function(){var s=this.$store.state.session.usuario.recordarme;return s?this.$store.state.session.usuario.user:""},getPassword:function(){var s=this.$store.state.session.usuario.recordarme;return s?this.$store.state.session.usuario.password:""},getEmpresa:function(){var s=this.$store.state.session.usuario.recordarme;return s?this.$store.state.session.usuario.empresa:null},getshowEmpresas:function(){var s=this.$store.state.session.usuario.recordarme;return!s||("admin"==this.$store.state.session.usuario.user?(this.empresa={value:1,name:""},!1):(this.empresa=null,!0))},validateBeforeSubmit:function(s){var e=this;this.$validator.validateAll(s).then(function(s){if(s){var a=e.User,r=e.Password;null==e.empresa&&(e.empresa={value:1,name:""}),l.a.get("https://localhost:44386/api/autenticacion/ObtenerBloqueUsuario/",{params:{user:a,empresa:e.empresa.value}}).then(function(s){var t=s.data;1==t?u.a.fire({title:"Acceso denegado",text:"Cuenta bloqueada, comuníquese con el administrador del sistema.",type:"error",showConfirmButton:!1,toast:!0,timer:5e3,position:"top"}):l.a.get("https://localhost:44386/api/autenticacion/ValidarCredenciales/",{params:{user:a,password:r,empresa:e.empresa.value}}).then(function(s){var a=s.data;if(a.length>0){!0,e.$store.dispatch("session/SELECCION_EMPRESA",{data:e.empresa}),localStorage.setItem("iduserlogeado",a[0]["usuario_id"]);var r="es";1==a[0]["idioma"]?r="es":2==a[0]["idioma"]&&(r="en");var t="",o="";1==a[0]["rol_id"]?(t=0,o=""):(t=a[0]["empresa_id"],o=a[0]["empresa"]),localStorage.setItem("idiomausuario",r),e.$store.dispatch("session/GET_INFOLOGIN",{idusuario:a[0]["usuario_id"],user:a[0]["user"],password:a[0]["password"],nomusuario:a[0]["nombres"],cargo:a[0]["cargo"],foto:a[0]["foto"],idioma:r,email:a[0]["correo"],empresaid:t,empresa:o,cambiocontra:a[0]["cambiocontra"],rolid:a[0]["rol_id"],rol:a[0]["rol"],recordarme:e.recordarme}),e.$store.dispatch("session/GET_UBIGEO",{nombre:"Pais"}),e.$store.dispatch("session/GET_UBIGEO",{nombre:"Departamento"}),e.$store.dispatch("session/GET_UBIGEO",{nombre:"Distrito"}),e.$store.dispatch("session/GET_UBIGEO",{nombre:"Provincia"}),e.$i18n.i18next.changeLanguage(r),e.$store.dispatch("session/UPDATE_LANGUAGE",{idioma:r}),e.$store.dispatch("session/INTENTOS_SESSION",{empresaid:e.empresa.value,user:e.login.user,logeado:1}),l.a.get("https://localhost:44386/api/autenticacion/ObtenerVigenciaCredenciales/",{params:{empresa:e.empresa.value,usuario:a[0]["usuario_id"]}}).then(function(s){var r=s.data;0==r?(u.a.fire({title:"Contraseña caducada",text:"Su contraseña ha expirado",type:"error",showConfirmButton:!1,toast:!0,timer:6e3,position:"top"}),localStorage.setItem("vigenciacontra",0),e.$router.push("/cambiar")):(localStorage.setItem("vigenciacontra",1),e.$store.dispatch("session/GET_MENUROL",{usuario:a[0]["usuario_id"],accesoempresa:0}),e.$store.dispatch("permisos/GET_PERMISOUSUARIO",{empresa:a[0]["empresa_id"],rol:a[0]["rol_id"]}),e.$session.set("menu",[]),localStorage.setItem("rol",1))}).catch(function(s){console.log(s),e.errored=!0}).finally(function(){return e.loading=!1})}else e.$store.dispatch("session/INTENTOS_SESSION",{empresaid:e.empresa.value,user:e.login.user,logeado:0}),u.a.fire({title:"Acceso denegado",text:"Por favor ingrese credenciales válidas.",type:"error",showConfirmButton:!1,toast:!0,timer:5e3,position:"top"})}).catch(function(s){console.log(s),e.errored=!0}).finally(function(){return e.loading=!1})}).catch(function(s){console.log(s)}).finally(function(){return e.loading=!1})}})},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"}}},f=h,g=(a("eeb1"),a("9aa7"),a("2877")),w=Object(g["a"])(f,r,t,!1,null,null,null);e["default"]=w.exports},"9aa7":function(s,e,a){"use strict";var r=a("196f"),t=a.n(r);t.a},eeb1:function(s,e,a){"use strict";var r=a("27b2"),t=a.n(r);t.a}}]);